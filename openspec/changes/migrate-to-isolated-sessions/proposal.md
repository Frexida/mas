# Migrate to Isolated Sessions

## Summary
レガシーセッションモードを完全に廃止し、分離セッションアーキテクチャに統一する。これにより、システム全体で一貫したセッション管理を実現し、複雑性を削減する。

## Problem
現在のMASシステムには2つのセッションモードが存在する：

1. **レガシーモード**: 単一セッション、共有ディレクトリ、固定名（`mas-tmux`）
2. **分離モード**: マルチセッション、独立ワークスペース、UUIDベース

この二重性により以下の問題が発生している：

- **API複雑性**: 2つのモードを判別・処理するロジックが複雑
- **不一致**: レガシーモードでもUUID名が使われるなど、動作が不一致
- **メンテナンス負荷**: 2つのコードパスを維持する必要がある
- **ユーザー混乱**: どちらのモードを使うべきか不明確
- **WebUI問題**: セッション一覧が正しく表示されない

## Solution
レガシーモードを完全に廃止し、すべてのセッションを分離セッションとして扱う：

1. **単一アーキテクチャ**: すべてのセッションが `sessions/{uuid}/` 構造を使用
2. **一貫したAPI**: `sessionMode` パラメータを削除し、常に分離セッションを作成
3. **簡潔な実装**: 条件分岐を削除し、コードを簡素化
4. **デフォルト動作**: 単一セッション使用時も分離アーキテクチャを使用

移行戦略：
- 既存の `mas-tmux` セッションを検出したら、分離セッションへの移行を促す
- 後方互換性のため、一時的な移行パスを提供
- すべてのセッションをUUIDベースで管理

## Outcomes
- **統一されたアーキテクチャ**: 1つのセッション管理方式のみ
- **簡素化されたコード**: 条件分岐の削除によるコード削減
- **改善されたAPI**: 一貫性のあるレスポンスとセッション識別
- **正確なWebUI表示**: すべてのセッションが正しく一覧表示
- **将来性**: マルチセッション前提の設計

## Scope
### In Scope
- レガシーモード関連コードの削除
- API から `sessionMode` パラメータを削除
- デフォルトセッション作成を分離モードに統一
- WebUI のセッション表示ロジック簡素化
- 移行ガイドとドキュメント更新

### Out of Scope
- 既存セッションの自動移行ツール
- セッション間通信機能
- 分散セッション管理
- セッションテンプレート機能

## Constraints
- 既存のAPIエンドポイントURLは維持（内部動作のみ変更）
- tmuxセッション名は `mas-{uuid-prefix}` 形式を維持
- sessions.index ファイル形式は現状維持
- 移行期間中の一時的な互換性レイヤーを提供